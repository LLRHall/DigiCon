<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/png" href="/static/assets/img/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>$APPNAME by $TEAMNAME</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS     -->
    <link href="/static/assets/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="/static/assets/css/animate.min.css" rel="stylesheet"/>

    <!--  Light Bootstrap Table core CSS    -->
    <link href="/static/assets/css/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet"/>

    <!--     Fonts and icons     -->
    <link href="/static/assets/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="/static/assets/css/pe-icon-7-stroke.css" rel="stylesheet">
    <link href="/static/assets/css/index.css" rel="stylesheet">
    <!-- intro.js-->
    <link href="/static/assets/css/introjs.css" rel="stylesheet">
    <script src="/static/assets/js/jquery.3.2.1.min.js" type="text/javascript"></script>

</head>
<body>

<div class="wrapper">
    {% include 'side-nav.html' %}
    <div class="main-panel">
        {% include 'navbar.html' %}
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                  <!--   <output id="list"></output>
                    <form id="upload-file" method="post" enctype="multipart/form-data">
                        <fieldset>
                            <label for="file">Select Image(s)</label>
                            <input name="file" type="file">
                        </fieldset>
                        <fieldset>
                            <button id="upload-file-btn" type="button">Upload</button>
                        </fieldset>
                    </form> -->
                    
                        <div class="col-md-1"></div>
                        <div class="col-md-10">
                            <div class="drop">
                                <div class="cont">
                                    <i class="fa fa-cloud-upload"></i>
                                    <div class="tit">
                                        Drag & Drop
                                    </div>
                                      <div class="desc">
                                        your files to Assets, or 
                                    </div>
                                    <div class="browse">
                                        click here to browse
                                    </div>
                                </div>
                                <output id="list"></output>
                                <form  id="upload-file" method="post" enctype="multipart/form-data">
                                    <input id="files" multiple="true" name="file" type="file" />
                                </form>     
                            </div>
                        </div>
                        <div class="col-md-1"></div>
                    
                </div>
            </div>
        </div>

        {% include 'footer.html' %}


    </div>
</div>


</body>

    <!--   Core JS Files   -->

	<script src="/static/assets/js/bootstrap.min.js" type="text/javascript"></script>

	<!--  Charts Plugin -->
	<script src="/static/assets/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="/static/assets/js/bootstrap-notify.js"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
	<script src="/static/assets/js/light-bootstrap-dashboard.js?v=1.4.0"></script>

    <!-- intro.js-->
    <script src="/static/assets/js/intro.js"></script>

	<!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
	<script src="/static/assets/js/demo.js"></script>


    <script type="text/javascript">
        $(document).ready(function(){
            $(".drop").addClass("animated bounceInUp")
            var drop = $(".drop");
            drop.on('dragenter', function (e) {
                $(".drop").css({
                    "border": "4px dashed #09f",
                    "background": "rgba(0, 153, 255, .05)"
                });
                $(".cont").css({
                    "color": "#09f"
                });
            }).on('dragleave dragend mouseout drop', function (e) {
                $(".drop").css({
                    "border": "3px dashed #DADFE3",
                    "background": "transparent"
                });
                $(".cont").css({
                    "color": "#8E99A5"
                });
            });



            function handleFileSelect(evt) {
                var files = evt.target.files; // FileList object

                // Loop through the FileList and render image files as thumbnails.
                for (var i = 0, f; f = files[i]; i++) {

                    // Only process image files.
                    if (!f.type.match('image.*')) {
                        continue;
                    }

                    var reader = new FileReader();

                    // Closure to capture the file information.
                    reader.onload = (function(theFile) {
                        return function(e) {
                            // Render thumbnail.
                            var span = document.createElement('span');
                            span.innerHTML = ['<div class="row"><img class="thumb" src="', e.target.result,
                                    '" title="', escape(theFile.name), '"/></div>'].join('');
                            document.getElementById('list').insertBefore(span, null);
                        };
                    })(f);
                    // console.log("Dad");
                    console.log(f);
                    var form_data = new FormData($('#upload-file')[i]);
                    // Read in the image file as a data URL.
                    reader.readAsDataURL(f);
                    $.ajax({
                        type: 'POST',
                        url: '/uploadfile',
                        data: form_data,
                        contentType: false,
                        cache: false,
                        processData: false,
                        async: false,
                        success: function(data) {
                            console.log(data);
                            filename = data.substring(0, data.lastIndexOf('.'));
                            alert('file '+ filename + ' uploaded')
                        },
                    });
                    
            
                }
            }

            $('#files').change(handleFileSelect);

            // // $('#upload-file-btn').click(function() {
            // //         // Loop through the FileList and render image files as thumbnails.
            // //     for (var i = 0, f; f = $('#upload-file')[i]; i++) {

            // //         // var filename = $('#upload-file').val().split('\\').pop();
            // //         var form_data = new FormData($('#upload-file')[i]);
            // //         // console.log(form_data.name);
            // //         var span = document.createElement('span');
            // // //                 span.innerHTML = ['<div class="row"><img class="thumb" src="', e.target.result,
            // // //                         '" title="', escape(theFile.name), '"/></div>'].join('');
            // // //                 document.getElementById('list').insertBefore(span, null);
            // //         $.ajax({
            // //             type: 'POST',
            // //             url: '/uploadfile',
            // //             data: form_data,
            // //             contentType: false,
            // //             cache: false,
            // //             processData: false,
            // //             async: false,
            // //             success: function(data) {
            // //                 console.log(data);
            // //                 filename = data.substring(0, data.lastIndexOf('.'));
            // //                 alert('file '+ filename + ' uploaded')
            // //             },
            // //         });
            // //     }
                
            // });
        

        });
    </script>


</html>
